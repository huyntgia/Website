//<![CDATA[
// Email Form by giahuy code
// Open Close Button
$(".form-close").click(function(){
  $(".giahuy-form-mail").fadeOut("fast")}
);$(".show-form").click(function(){
  $(".giahuy-form-mail").fadeIn("slow")});
 
// Validation For Mailjib Column Contents
$('.giahuy-input-field .validate').each(function() {
    title = $(this).attr('name');
    label = $(this).parents('.giahuy-input-field');
    $('<span class="giahuy-validation"><b>' + title + '</b> yêu cầu</span>').appendTo(label);
});
   $(document).on('keyup', '.giahuy-input-field .validate', function() {
    if ($(this).val() != '') {
        $(this).removeClass('focus');
        $(this).parents('.giahuy-input-field').find('.giahuy-validation').removeClass('show');
    }
});
$(document).on('change', '.giahuy-input-field select', function() {
    $(this).removeClass('focus');
    $(this).parents('.giahuy-input-field').find('.giahuy-validation').removeClass('show');
});
$('.send_form').click(mailchat);
function mailchat() { 
if ($('#mail_name').val() == '') { // Validation Full Name
          $('#mail_name').each(function() {
              $(this).addClass('focus');
                    $(this).parents('.giahuy-input-field').find('.giahuy-validation').addClass('show');
          });
        $('#mail_name').focus();
        return false;
    } else if ($('#mail_number').val() == '') { // mobile number validation
          $('#mail_number').each(function() {
              $(this).addClass('focus');
                    $(this).parents('.giahuy-input-field').find('.giahuy-validation').addClass('show');
          });
        $('#mail_number').focus();
        return false;
    } else if ($('#mail_blog').val() == '') { // Blog Name validation
          $('#mail_blog').each(function() {
              $(this).addClass('focus');
                    $(this).parents('.giahuy-input-field').find('.giahuy-validation').addClass('show');
          });
        $('#mail_blog').focus();
        return false;
      } else if ($('#mail_url').val() == '') { // giahuy-validation Blog Url
          $('#mail_url').each(function() {
              $(this).addClass('focus');
                    $(this).parents('.giahuy-input-field').find('.giahuy-validation').addClass('show');
          });
        $('#mail_url').focus();
        return false;
      } else if ($('#mail_license').val() == 'default') { // License validation
          $('#mail_license').each(function() {
              $(this).addClass('focus');
                    $(this).parents('.giahuy-input-field').find('.giahuy-validation').addClass('show');
          });
        $('#mail_license').focus();
        return false;
        } else if ($('#mail_payment').val() == 'default') { // Payment validation
          $('#mail_payment').each(function() {
              $(this).addClass('focus');
                    $(this).parents('.giahuy-input-field').find('.giahuy-validation').addClass('show');
          });
        $('#mail_payment').focus();
        return false;
    } else {
 
      /* Email Settings */
var maillink = 'https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&to=',
    email = 'giahuy@usa.com', //Your Email Address
    mailsubject = '&subject=Xác nhận mua hàng ', //Email Subject But Appears On Smartphone Onlya
    maillink1 = '',
    range = '',
    maillink2 = '&body=Xin chào, tôi muốn mua mẫu của bạn với thông tin sau: '; //Welcome Message
      
/* Smartphone Support */ 
if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { 
var maillink = 'mailto:',
    range ='<br>',
    maillink1 = '?cc=&bcc=';
}  
 
 /* Call Input Form */ 
var input_name = $("#mail_name").val(),
    input_number = $("#mail_number").val(),
    input_nameBlog = $("#mail_blog").val(), 
    input_urlBlog = $("#mail_url").val(),  
    input_license = $("#mail_license :selected").text(),
    input_payment = $("#mail_payment :selected").text(),
    input_productname = $("#name_product").text(),
    input_viaUrl = location.href;

/* Email Final URL */ 
var mail_link = maillink + email + maillink1 + mailsubject + input_name + maillink2 + '%0A%0A' + range + range +
    'THÔNG TIN CỦA TÔI ' + range + 
    '%0A-----------------------------%0A' + '%0A' + range + range +
    'Họ tên: ' + input_name + '%0A' + range + 
    'Số lượng: ' + input_number + '%0A' + range +
    'Tên Blog: ' + input_nameBlog + '%0A' + range +
    'Url Blog: ' + input_urlBlog + '%0A' + range +
    'Phương thức thanh toán: ' + input_payment + '%0A' + range +
    '%0A-----------------------------%0A' + '%0A' + range + range + 
    'THÔNG TIN SẢN PHẨM %0A' + range +
    '-----------------------------%0A' + range +
    'Tên Template: ' + input_productname + '%0A' + range + 
    'Loại giấy phép: ' + input_license + '%0A' + range + 
    'Liên kết mẫu: ' + input_viaUrl + '%0A' + range + 
    '%0A-----------------------------%0A';
 
/* Open Email Window */ 
window.open(mail_link,'_blank');
window.location.href = input_viaUrl;
return false;
  }
};
//]]> 
